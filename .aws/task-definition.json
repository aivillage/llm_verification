{
    "containerDefinitions": [
        {
            "essential": true,
            "image": "redis:4",
            "mountPoints": [
                {
                    "containerPath": "/data",
                    "sourceVolume": "_DataRedis"
                }
            ],
            "name": "cache"
        },
        {
            "environment": [
                {
                    "name": "UPLOAD_FOLDER",
                    "value": "/var/uploads"
                },
                {
                    "name": "DATABASE_URL",
                    "value": "mysql+pymysql://ctfd:ctfd@db/ctfd"
                },
                {
                    "name": "REDIS_URL",
                    "value": "redis://cache:6379"
                },
                {
                    "name": "WORKERS",
                    "value": "1"
                },
                {
                    "name": "LOG_FOLDER",
                    "value": "/var/log/CTFd"
                },
                {
                    "name": "ACCESS_LOG",
                    "value": "-"
                },
                {
                    "name": "ERROR_LOG",
                    "value": "-"
                },
                {
                    "name": "REVERSE_PROXY",
                    "value": "true"
                }
            ],
            "essential": true,
            "mountPoints": [
                {
                    "containerPath": "/var/log/CTFd",
                    "sourceVolume": "_DataCtfdLogs"
                },
                {
                    "containerPath": "/var/uploads",
                    "sourceVolume": "_DataCtfdUploads"
                },
                {
                    "containerPath": "/opt/CTFd",
                    "sourceVolume": "_"
                }
            ],
            "name": "ctfd",
            "portMappings": [
                {
                    "containerPort": 8000,
                    "hostPort": 8000
                }
            ],
            "user": "root"
        },
        {
            "command": [
                "mysqld",
                "--character-set-server=utf8mb4",
                "--collation-server=utf8mb4_unicode_ci",
                "--wait_timeout=28800",
                "--log-warnings=0"
            ],
            "environment": [
                {
                    "name": "MYSQL_ROOT_PASSWORD",
                    "value": "ctfd"
                },
                {
                    "name": "MYSQL_USER",
                    "value": "ctfd"
                },
                {
                    "name": "MYSQL_PASSWORD",
                    "value": "ctfd"
                },
                {
                    "name": "MYSQL_DATABASE",
                    "value": "ctfd"
                }
            ],
            "essential": true,
            "image": "mariadb:10.4.12",
            "mountPoints": [
                {
                    "containerPath": "/var/lib/mysql",
                    "sourceVolume": "_DataMysql"
                }
            ],
            "name": "db"
        },
        {
            "essential": true,
            "image": "nginx:stable",
            "mountPoints": [
                {
                    "containerPath": "/etc/nginx/nginx.conf",
                    "sourceVolume": "_ConfNginxHttp_Conf"
                }
            ],
            "name": "nginx",
            "portMappings": [
                {
                    "containerPort": 80,
                    "hostPort": 80
                }
            ]
        }
    ],
    "family": "",
    "volumes": [
        {
            "host": {
                "sourcePath": ".data/CTFd/logs"
            },
            "name": "_DataCtfdLogs"
        },
        {
            "host": {
                "sourcePath": ".data/CTFd/uploads"
            },
            "name": "_DataCtfdUploads"
        },
        {
            "host": {
                "sourcePath": "."
            },
            "name": "_"
        },
        {
            "host": {
                "sourcePath": "./conf/nginx/http.conf"
            },
            "name": "_ConfNginxHttp_Conf"
        },
        {
            "host": {
                "sourcePath": ".data/mysql"
            },
            "name": "_DataMysql"
        },
        {
            "host": {
                "sourcePath": ".data/redis"
            },
            "name": "_DataRedis"
        }
    ]
}
