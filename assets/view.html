{% extends "challenge.html" %}

{% block description %}
    {{ challenge.html }}

    <hr>

    <ul class="nav nav-pills mb-3 nav-fill" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="pills-new-submission-tab" data-toggle="pill" href="#pills-new-submission" role="tab">New Submission</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="pills-prev-submissions-tab" data-toggle="pill" href="#pills-prev-submissions" role="tab">Previous Submissions</a>
        </li>
    </ul>
    <div class="tab-content" x-data="llm_verification">
        <div class="tab-pane fade show active" id="pills-new-submission" role="tabpanel">
            <div class="tab-content">
                <textarea id="challenge-prompt" class="challenge-input mb-3" type="text" name="answer" placeholder="Prompt" rows="5" x-model="prompt"></textarea>
                <button id="challenge-generate" class="challenge-submit" type="submit" @click.debounce.500ms="generateText()">Generate</button>
            </div>
            <br>
            <br>
            <div class="tab-content">
                <textarea id="challenge-generated" class="challenge-input mb-3" type="text" name="answer" placeholder="Generated Text" x-model="generated_text" readonly></textarea>
            </div>

            <button id="challenge-submit" class="challenge-submit" type="submit">
                Submit
            </button>
        </div>
        <div class="tab-pane fade" id="pills-prev-submissions" role="tabpanel">
            <div class="row">
                <div class="col-md-12" id="challenge-submissions"></div>
            </div>
        </div>
    </div>
{% endblock %}

{% block input %}
    <input
        id="challenge-id" class="challenge-id" type="hidden"
        value="{{ challenge.id }}"
    >
    <input
        id="challenge-input" class="challenge-input form-control"
        type="text" name="submission"
        placeholder="{% trans %}Flag{% endtrans %}" x-model="submission"
    >
{% endblock %}